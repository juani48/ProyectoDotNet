@page "/registro"

<!--Caso de uso para Usuarios-->
@inject CasoDeUsoRegistrarUsuario registrarSesion

<!--Uso de la pagina-->
@inject NavigationManager navigationManager
@rendermode InteractiveServer
@layout LoginLayout

<div class="contenedor">
    <div class="contenido">
            <h3>Bienvenido al sistema</h3>
            <h4>Registrese</h4>

            <div style="margin-bottom: 10px;" >
                Nombre<br>
                <input placeholder="Ingrese su nombre" @bind="_usuario.Nombre" >
            </div>

            <div style="margin-bottom: 10px;" >
                Apellido<br>
                <input placeholder="Ingrese su apellido" @bind="_usuario.Apellido" >
            </div>

            <div style="margin-bottom: 10px;" >
                Correo<br>
                <input placeholder="Ingrese su correo electronico" @bind="_usuario.Correo">
            </div>

            <div style="margin-bottom: 10px;" >
                Contrase単a<br>
                <input placeholder="Ingrese su contrase単a" @bind="_usuario.Contrase単a" ><br>
            </div>
            
            <button @onclick="_RegistrarSesion" style="margin-bottom: 10px;" class="btn btn-primary" >Registrase</button>
            <p>多Ya tiene una cuenta? <u><a href="/">Inicie sesion.</a></u></p>
            
    </div>
</div>

<Mensaje @ref="_mensaje" Text="@_stMensaje" eventCallback="_Volver" />

@code{
    private Usuario _usuario = new Usuario();

    private string _stMensaje = "";
    private Mensaje _mensaje = null!;

    private void _RegistrarSesion(){
        try{
            registrarSesion.Ejecutar(_usuario);
            _usuario = new Usuario();
            navigationManager.NavigateTo("/home");
        }
        catch(Exception e){
            _stMensaje = $"Ocurrio un error inesperado. {e.Message}";
            _mensaje.MostrarMensaje();
        }
    }

    private void _Volver(){
        navigationManager.NavigateTo("/");
    } 
}